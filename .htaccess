RewriteEngine On

# Redirect /page.html -> /page
RewriteCond %{THE_REQUEST} \s/([^.]+)\.html [NC]
RewriteRule ^ %1 [R=301,L]

# Internally map /page -> /page.html if file exists
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^([a-zA-Z0-9_-]+)/?$ $1.html [L]

# Custom 404
ErrorDocument 404 /404
ErrorDocument 505 /505

RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [L,R=301]
